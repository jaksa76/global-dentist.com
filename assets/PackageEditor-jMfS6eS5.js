import{_ as I,o as l,k as d,l as y,t as u,V as O,X as B,U as S,c as m,F as V,Y as A,p as n,Z as N,s as T,$ as P,a0 as q,m as a,w as C,j,a1 as v,n as D,B as w,r as F,v as R}from"./index-CC1aYuAQ.js";import{T as H}from"./treatments-FRMeeQws.js";import{c as L}from"./clinics-DqPopm-J.js";import{p as z}from"./prices-Sgi2l8nr.js";import{h as U}from"./hotels-DLeUOm7t.js";import{N as M}from"./Time-CVVgug1X.js";import"./index-CDRYWQJ8.js";const X={class:"step-number"},Y={key:0},Z={class:"content"},G={key:1,class:"title-overlay"},J={__name:"EditorSection",props:{stepNumber:{type:Number,required:!0},title:{type:String,required:!0},isCompleted:{type:Boolean,default:!1}},emits:["click"],setup(o){return(s,f)=>(l(),d("div",{class:"editor-section",onClick:f[0]||(f[0]=h=>s.$emit("click"))},[y("div",X,u(o.stepNumber),1),o.isCompleted?O("",!0):(l(),d("h3",Y,u(o.title),1)),y("div",Z,[B(s.$slots,"default",{},void 0,!0)]),o.isCompleted?(l(),d("div",G,[y("h3",null,u(o.title),1)])):O("",!0)]))}},b=I(J,[["__scopeId","data-v-9d7a2fc7"]]),K={key:0,class:"option-container"},Q=["src"],W={class:"option-name"},ee={key:0,class:"more-option-selected"},te={key:1,class:"placeholder"},ne={__name:"OptionContainer",props:{options:{type:Array,required:!0},maxDisplay:{type:Number,default:4},emptyText:{type:String,required:!0},renderOption:{type:Function,default:o=>o}},setup(o){const s=o,{t:f}=S(),h=m(()=>s.options.slice(0,s.maxDisplay)),g=m(()=>s.options.length>s.maxDisplay),$=m(()=>s.options.length-s.maxDisplay);function _(r){return s.renderOption(r).image||""}function k(r){return s.renderOption(r).name||""}return(r,c)=>o.options.length>0?(l(),d("div",K,[(l(!0),d(V,null,A(h.value,t=>(l(),d("div",{key:t.id},[y("img",{src:_(t),class:"option-image"},null,8,Q),y("div",W,u(k(t)),1)]))),128)),g.value?(l(),d("div",ee,u(n(f)("editor.more",{count:$.value})),1)):O("",!0)])):(l(),d("div",te,u(o.emptyText),1))}},x=I(ne,[["__scopeId","data-v-cb6ecf4e"]]),se={key:0,class:"cheapest-price"},oe={class:"from"},re={class:"price"},ie={__name:"CheapestPrice",props:{type:{type:String,required:!0,validator:o=>["clinic","hotel"].includes(o)}},setup(o){S();const s=o;function f(r,c,t){let e=0;const i=t[r];if(!i)return 0;for(const p of c)if(i[p])e+=i[p];else return 0;return e}function h(r,c,t){if(!r.length||!c.length)return 0;let e=1/0;for(const i of r){const p=f(i,c,t);p>0&&p<e&&(e=p)}return e===1/0?0:e}function g(r,c){if(!r.length)return 0;let t=1/0;for(const e of r){const i=c.find(p=>p.folder===e.folder);i&&i.price<t&&(t=i.price)}return t===1/0?0:t}const $=m(()=>{const r=[];for(const[c,t]of Object.entries(N.treatments))for(let e=0;e<t;e++)r.push(c);return r}),_=m(()=>s.type==="clinic"?h(T.clinics,$.value,z):g(P.hotels,U)),k=m(()=>Math.round(_.value*q.rate));return(r,c)=>_.value>0?(l(),d("div",se,[y("p",oe,u(r.$t("message.from")),1),y("p",re,u(n(q).getSymbol())+u(k.value),1)])):O("",!0)}},E=I(ie,[["__scopeId","data-v-b70712df"]]),ce=o=>(F("data-v-0b4cc9b0"),o=o(),R(),o),ae={class:"package-editor"},le=ce(()=>y("div",{class:"timeline-line"},null,-1)),de={key:0,class:"date-range"},ue={key:1,class:"placeholder"},pe={__name:"PackageEditor",setup(o){const{t:s}=S(),f=j(),h=m(()=>Object.entries(N.treatments).map(([t,e])=>({id:t,count:e}))),g=m(()=>T.clinics.map(t=>({id:t}))),$=m(()=>P.hotels.map(t=>({id:t.folder,...t})));function _(t){const e=H.find(i=>i.id===t.id);return{image:(e==null?void 0:e.image)||"",name:`${s(`treatments.${t.id}`)} (${t.count})`}}function k(t){var i;const e=L.find(p=>p.id===t.id);return{image:((i=e==null?void 0:e.images)==null?void 0:i[0])||"",name:(e==null?void 0:e.name)||""}}function r(t){var e;return{image:((e=t.thumbnails)==null?void 0:e[0])||"",name:t.name||""}}function c(){f.push("/request-offers")}return(t,e)=>(l(),d("div",ae,[le,a(n(b),{"step-number":1,title:n(s)("editor.treatments"),"is-completed":Object.keys(n(N).treatments).length>0,onClick:e[0]||(e[0]=i=>t.$router.push("/editor/treatments"))},{default:C(()=>[a(n(x),{options:h.value,"empty-text":n(s)("editor.selectTreatments"),"render-option":_},null,8,["options","empty-text"])]),_:1},8,["title","is-completed"]),a(n(b),{"step-number":2,title:n(s)("editor.clinics"),"is-completed":n(T).clinics.length>0,onClick:e[1]||(e[1]=i=>t.$router.push("/editor/clinics"))},{default:C(()=>[a(n(x),{options:g.value,"empty-text":n(s)("editor.selectClinics"),"render-option":k},null,8,["options","empty-text"]),a(E,{type:"clinic"})]),_:1},8,["title","is-completed"]),a(n(b),{"step-number":3,title:n(s)("editor.preferredDates"),"is-completed":n(v).length>0,onClick:e[2]||(e[2]=i=>t.$router.push("/editor/dates"))},{default:C(()=>[n(v).length===2&&n(v)[0]&&n(v)[1]?(l(),d("div",de,[a(n(M),{time:n(v)[0],type:"date",format:"MMM d, yyyy"},null,8,["time"]),D(" - "),a(n(M),{time:n(v)[1],type:"date",format:"MMM d, yyyy"},null,8,["time"])])):(l(),d("div",ue,u(n(s)("editor.selectDates")),1))]),_:1},8,["title","is-completed"]),a(n(b),{"step-number":4,title:n(s)("editor.accommodation"),"is-completed":n(P).hotels.length>0,onClick:e[3]||(e[3]=i=>t.$router.push("/editor/accommodation"))},{default:C(()=>[a(n(x),{options:$.value,"empty-text":n(s)("editor.selectAccommodation"),"render-option":r},null,8,["options","empty-text"]),a(E,{type:"hotel"})]),_:1},8,["title","is-completed"]),a(n(w),{type:"primary",size:"large",class:"request-button",onClick:c},{default:C(()=>[D(u(n(s)("editor.requestOffer")),1)]),_:1})]))}},$e=I(pe,[["__scopeId","data-v-0b4cc9b0"]]);export{$e as default};
