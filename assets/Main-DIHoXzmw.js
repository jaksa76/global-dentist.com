import{_ as M,j as F,U as I,x as j,c as x,X as D,o as n,k as i,F as C,$ as N,l as t,m as v,w as m,W as b,p as o,a1 as u,t as a,V as w,n as _,a2 as $,B as f}from"./index-M6u5Rlfs.js";import{h as L}from"./hotels-CSV1N42v.js";import{a as A,N as E}from"./Carousel-D40U4BO8.js";const O={class:"hotel-list"},T={class:"image-container"},U=["src"],W={key:0,class:"overlay"},X={class:"hotel-card-content"},q={class:"hotel-card-header"},z={class:"hotel-card-title"},G={class:"hotel-card-rating"},J={class:"hotel-card-location"},K={key:0,class:"hotel-rating"},Q={class:"hotel-rating-count"},Y={key:0,class:"hotel-card-price"},Z={class:"per-night"},ee={class:"price"},se={key:1,class:"hotel-card-price"},te={class:"per-night"},oe={class:"actions"},ae={__name:"HotelList",props:{hotels:Array},setup(B){const g=F(),{t:p}=I(),y=B,d=j({}),k=x(()=>y.hotels.filter(e=>!e.hidden)),H=e=>{const r=d.value[e.folder];return typeof r=="number"&&isFinite(r)?Math.round(r*$.rate):typeof e.price=="number"&&isFinite(e.price)?Math.round(e.price*$.rate):null},R=e=>{g.push(`/hotel/${encodeURIComponent(e.folder)}`)},P=e=>{u.hotels.some(r=>r.name===e.name)||u.hotels.push(e)},V=e=>{u.hotels=u.hotels.filter(r=>r.name!==e.name)},S=async e=>{try{const s=await(await fetch(`/hotels/${e.folder}/rooms.json`)).json();if(s.rooms&&s.rooms.length>0){const h=s.rooms.flatMap(l=>l.offers||[]).filter(l=>l.price&&typeof l.price.value=="number"&&isFinite(l.price.value)).map(l=>l.price.value);if(h.length>0){const l=Math.min(...h);d.value[e.folder]=l}else d.value[e.folder]=null}else d.value[e.folder]=null}catch(r){console.error(`Error loading room data for ${e.name}:`,r),d.value[e.folder]=null}};return D(async()=>{for(const e of k.value)await S(e)}),(e,r)=>(n(),i("div",O,[(n(!0),i(C,null,N(k.value,s=>(n(),i("div",{key:s.name,class:"hotel-card"},[t("div",T,[v(o(E),{draggable:""},{default:m(()=>[(n(!0),i(C,null,N(s.thumbnails,(c,h)=>(n(),b(o(A),{key:h},{default:m(()=>[t("img",{src:c,alt:"Hotel Image",class:"carousel-image"},null,8,U)]),_:2},1024))),128))]),_:2},1024),o(u).hotels.some(c=>c.name===s.name)?(n(),i("div",W,[t("p",null,a(o(p)("message.selected")),1)])):w("",!0)]),t("div",X,[t("div",q,[t("div",null,[t("h3",z,[_(a(s.name)+" ",1),t("span",null,a("âœ©".repeat(s.starRating||0)),1)]),t("div",G,[t("p",J,a(s.city)+", "+a(s.country),1),s.rating?(n(),i("div",K,[_(a(e.$t("message.userRating"))+" ",1),t("span",Q,a(Number(s.rating).toFixed(1)),1)])):w("",!0)])]),H(s)!==null?(n(),i("div",Y,[t("p",Z,a(e.$t("message.from")),1),t("p",ee,a(o($).getSymbol())+a(H(s)),1)])):(n(),i("div",se,[t("p",te,a(e.$t("message.noPriceAvailable")),1)]))]),t("div",oe,[v(o(f),{style:{margin:"0"},class:"action-button",onClick:c=>R(s)},{default:m(()=>[_(a(e.$t("message.details")),1)]),_:2},1032,["onClick"]),o(u).hotels.some(c=>c.name===s.name)?(n(),b(o(f),{key:1,class:"book-now-button",type:"primary",onClick:c=>V(s)},{default:m(()=>[_(a(o(p)("message.deselect")),1)]),_:2},1032,["onClick"])):(n(),b(o(f),{key:0,class:"book-now-button",type:"primary",onClick:c=>P(s)},{default:m(()=>[_(a(o(p)("message.select")),1)]),_:2},1032,["onClick"]))])])]))),128))]))}},ne=M(ae,[["__scopeId","data-v-9c23bd7c"]]),re={class:"container"},ce={class:"hotel-list"},le={class:"bottom-actions"},ie={__name:"Main",setup(B){const g=F(),{t:p}=I();return(y,d)=>(n(),i(C,null,[t("div",re,[t("div",ce,[v(o(ne),{initiallySelected:o(u).hotels,hotels:o(L),onBook:y.bookHotel},null,8,["initiallySelected","hotels","onBook"])])]),t("div",le,[v(o(f),{type:"primary",strong:"",onClick:d[0]||(d[0]=k=>o(g).push("/editor"))},{default:m(()=>[_(a(o(p)("message.continue")),1)]),_:1})])],64))}},_e=M(ie,[["__scopeId","data-v-bed60fc1"]]);export{_e as default};
