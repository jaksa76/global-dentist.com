import{_ as b,o as m,k as f,l as g,t as l,V as O,Z as q,U as x,c,F as j,$ as E,p as n,a0 as I,s as D,a1 as T,a2 as P,x as A,X as B,n as w,m as p,w as k,j as V,a3 as $,B as R,r as F,v as H}from"./index-D7Gr5auz.js";import{T as J}from"./treatments-FRMeeQws.js";import{c as U}from"./clinics-DqPopm-J.js";import{p as z}from"./prices-Sgi2l8nr.js";import{h as X}from"./hotels-Ck6C15ZG.js";import{N as M}from"./Time-DLId7VEe.js";import"./index-BsS2qkRd.js";const Z={italy:{city:"Milan",dentalImplants:1e3,crowns:700,veneers:800,hollywoodSmile:3e3},london:{city:"London",dentalImplants:2200,crowns:1350,veneers:895}},G={class:"step-number"},K={key:0},Q={class:"content"},W={key:1,class:"title-overlay"},Y={__name:"EditorSection",props:{stepNumber:{type:Number,required:!0},title:{type:String,required:!0},isCompleted:{type:Boolean,default:!1}},emits:["click"],setup(r){return(o,u)=>(m(),f("div",{class:"editor-section",onClick:u[0]||(u[0]=y=>o.$emit("click"))},[g("div",G,l(r.stepNumber),1),r.isCompleted?O("",!0):(m(),f("h3",K,l(r.title),1)),g("div",Q,[q(o.$slots,"default",{},void 0,!0)]),r.isCompleted?(m(),f("div",W,[g("h3",null,l(r.title),1)])):O("",!0)]))}},S=b(Y,[["__scopeId","data-v-9d7a2fc7"]]),ee={key:0,class:"option-container"},te=["src"],ne={class:"option-name"},oe={key:0,class:"more-option-selected"},re={key:1,class:"placeholder"},se={__name:"OptionContainer",props:{options:{type:Array,required:!0},maxDisplay:{type:Number,default:4},emptyText:{type:String,required:!0},renderOption:{type:Function,default:r=>r}},setup(r){const o=r,{t:u}=x(),y=c(()=>o.options.slice(0,o.maxDisplay)),d=c(()=>o.options.length>o.maxDisplay),h=c(()=>o.options.length-o.maxDisplay);function _(s){return o.renderOption(s).image||""}function C(s){return o.renderOption(s).name||""}return(s,i)=>r.options.length>0?(m(),f("div",ee,[(m(!0),f(j,null,E(y.value,e=>(m(),f("div",{key:e.id},[g("img",{src:_(e),class:"option-image"},null,8,te),g("div",ne,l(C(e)),1)]))),128)),d.value?(m(),f("div",oe,l(n(u)("editor.more",{count:h.value})),1)):O("",!0)])):(m(),f("div",re,l(r.emptyText),1))}},N=b(se,[["__scopeId","data-v-cb6ecf4e"]]),ie={key:0,class:"cheapest-price"},ae={class:"from"},ce={class:"price"},le={__name:"CheapestPrice",props:{type:{type:String,required:!0,validator:r=>["clinic","hotel"].includes(r)}},setup(r){x();const o=r;function u(s,i,e){let t=0;const a=e[s];if(!a)return 0;for(const v of i)if(a[v])t+=a[v];else return 0;return t}function y(s,i,e){if(!s.length||!i.length)return 0;let t=1/0;for(const a of s){const v=u(a,i,e);v>0&&v<t&&(t=v)}return t===1/0?0:t}function d(s,i){if(!s.length)return 0;let e=1/0;for(const t of s){const a=i.find(v=>v.folder===t.folder);a&&a.price<e&&(e=a.price)}return e===1/0?0:e}const h=c(()=>{const s=[];for(const[i,e]of Object.entries(I.treatments))for(let t=0;t<e;t++)s.push(i);return s}),_=c(()=>o.type==="clinic"?y(D.clinics,h.value,z):d(T.hotels,X)),C=c(()=>Math.round(_.value*P.rate));return(s,i)=>_.value>0?(m(),f("div",ie,[g("p",ae,l(s.$t("message.from")),1),g("p",ce,l(n(P).getSymbol())+l(C.value),1)])):O("",!0)}},L=b(le,[["__scopeId","data-v-b70712df"]]);async function ue(){try{const r=localStorage.getItem("userCountry");if(r){const{country:h,expiry:_}=JSON.parse(r);if(_>Date.now())return h;localStorage.removeItem("userCountry")}const y=(await(await fetch("https://ipapi.co/json/")).json()).country_name.toLowerCase(),d={country:y,expiry:Date.now()+24*60*60*1e3};return localStorage.setItem("userCountry",JSON.stringify(d)),y}catch{return null}}const de={key:0,class:"local-price-calculator"},pe={class:"local-price-amount"},me={__name:"LocalPriceCalculator",setup(r){const{t:o}=x(),u=A(null),y=c(()=>Object.keys(I.treatments).length>0);B(async()=>{u.value=await ue()});const d=c(()=>u.value&&Z[u.value]||null),h=c(()=>{if(!d.value||!y.value)return 0;let s=0;for(const[i,e]of Object.entries(I.treatments))d.value[i]&&(s+=d.value[i]*e);return s}),_=c(()=>Math.round(h.value*P.rate)),C=c(()=>d.value!==null&&y.value&&h.value>0);return(s,i)=>{var e;return C.value?(m(),f("div",de,[w(l(n(o)("editor.typicalCostIn",{city:(e=d.value)==null?void 0:e.city}))+" ",1),g("span",pe,l(n(P).getSymbol())+l(_.value),1)])):O("",!0)}}},fe=b(me,[["__scopeId","data-v-912b46ba"]]),ye=r=>(F("data-v-ef3d7a3f"),r=r(),H(),r),he={class:"package-editor"},_e=ye(()=>g("div",{class:"timeline-line"},null,-1)),ve={key:0,class:"date-range"},ge={key:1,class:"placeholder"},Ce={__name:"PackageEditor",setup(r){const{t:o}=x(),u=V(),y=c(()=>Object.entries(I.treatments).map(([e,t])=>({id:e,count:t}))),d=c(()=>D.clinics.map(e=>({id:e}))),h=c(()=>T.hotels.map(e=>({id:e.folder,...e})));function _(e){const t=J.find(a=>a.id===e.id);return{image:(t==null?void 0:t.image)||"",name:`${o(`treatments.${e.id}`)} (${e.count})`}}function C(e){var a;const t=U.find(v=>v.id===e.id);return{image:((a=t==null?void 0:t.images)==null?void 0:a[0])||"",name:(t==null?void 0:t.name)||""}}function s(e){var t;return{image:((t=e.thumbnails)==null?void 0:t[0])||"",name:e.name||""}}function i(){u.push("/request-offers")}return(e,t)=>(m(),f("div",he,[_e,p(n(fe)),p(n(S),{"step-number":1,title:n(o)("editor.treatments"),"is-completed":Object.keys(n(I).treatments).length>0,onClick:t[0]||(t[0]=a=>e.$router.push("/editor/treatments"))},{default:k(()=>[p(n(N),{options:y.value,"empty-text":n(o)("editor.selectTreatments"),"render-option":_},null,8,["options","empty-text"])]),_:1},8,["title","is-completed"]),p(n(S),{"step-number":2,title:n(o)("editor.clinics"),"is-completed":n(D).clinics.length>0,onClick:t[1]||(t[1]=a=>e.$router.push("/editor/clinics"))},{default:k(()=>[p(n(N),{options:d.value,"empty-text":n(o)("editor.selectClinics"),"render-option":C},null,8,["options","empty-text"]),p(L,{type:"clinic"})]),_:1},8,["title","is-completed"]),p(n(S),{"step-number":3,title:n(o)("editor.preferredDates"),"is-completed":n($).length>0,onClick:t[2]||(t[2]=a=>e.$router.push("/editor/dates"))},{default:k(()=>[n($).length===2&&n($)[0]&&n($)[1]?(m(),f("div",ve,[p(n(M),{time:n($)[0],type:"date",format:"MMM d, yyyy"},null,8,["time"]),w(" - "),p(n(M),{time:n($)[1],type:"date",format:"MMM d, yyyy"},null,8,["time"])])):(m(),f("div",ge,l(n(o)("editor.selectDates")),1))]),_:1},8,["title","is-completed"]),p(n(S),{"step-number":4,title:n(o)("editor.accommodation"),"is-completed":n(T).hotels.length>0,onClick:t[3]||(t[3]=a=>e.$router.push("/editor/accommodation"))},{default:k(()=>[p(n(N),{options:h.value,"empty-text":n(o)("editor.selectAccommodation"),"render-option":s},null,8,["options","empty-text"]),p(L,{type:"hotel"})]),_:1},8,["title","is-completed"]),p(n(R),{type:"primary",size:"large",class:"request-button",onClick:i},{default:k(()=>[w(l(n(o)("editor.requestOffer")),1)]),_:1})]))}},xe=b(Ce,[["__scopeId","data-v-ef3d7a3f"]]);export{xe as default};
