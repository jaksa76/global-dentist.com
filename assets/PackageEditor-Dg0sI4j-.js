import{_ as S,o as d,k as f,l as y,t as _,V as x,Z as U,U as N,c as u,F as R,$ as H,p as n,a0 as P,a1 as z,s as T,a2 as A,a3 as j,x as J,X as K,n as E,m as p,w as I,W,a4 as L,j as X,a5 as O,B as Z,r as Q,v as Y,a6 as ee}from"./index-BYKwQNmM.js";import{T as te}from"./treatments-FRMeeQws.js";import{c as D}from"./clinics-pj_Da-X1.js";import{h as ne}from"./hotels-CSV1N42v.js";import{c as q}from"./fetched-clinics-Cnq0QLvU.js";import{h as B}from"./fetched-hotels-CrR-RM6O.js";import{p as se}from"./prices-Sgi2l8nr.js";import{N as oe,a as ae}from"./Carousel-D75ctts2.js";import{N as F}from"./Time-jRE58kLY.js";import"./index-7CkLb0eX.js";const re={italy:{city:"Milan",dentalImplants:1e3,crowns:700,veneers:800,hollywoodSmile:3e3},london:{city:"London",dentalImplants:2200,crowns:1350,veneers:895}},ie={class:"step-number"},ce={key:0},le={class:"content"},de={key:1,class:"title-overlay"},ue={__name:"EditorSection",props:{stepNumber:{type:Number,required:!0},title:{type:String,required:!0},isCompleted:{type:Boolean,default:!1}},emits:["click"],setup(o){return(s,c)=>(d(),f("div",{class:"editor-section",onClick:c[0]||(c[0]=l=>s.$emit("click"))},[y("div",ie,_(o.stepNumber),1),o.isCompleted?x("",!0):(d(),f("h3",ce,_(o.title),1)),y("div",le,[U(s.$slots,"default",{},void 0,!0)]),o.isCompleted?(d(),f("div",de,[y("h3",null,_(o.title),1)])):x("",!0)]))}},w=S(ue,[["__scopeId","data-v-3453e7e5"]]),me={key:0,class:"option-container"},pe=["src"],fe={class:"option-name"},ye={key:0,class:"more-option-selected"},_e={key:1,class:"placeholder"},ge={__name:"OptionContainer",props:{options:{type:Array,required:!0},maxDisplay:{type:Number,default:4},emptyText:{type:String,required:!0},renderOption:{type:Function,default:o=>o}},setup(o){const s=o,{t:c}=N(),l=u(()=>s.options.slice(0,s.maxDisplay)),m=u(()=>s.options.length>s.maxDisplay),g=u(()=>s.options.length-s.maxDisplay);function h(C){return s.renderOption(C).image||""}function v(C){return s.renderOption(C).name||""}return(C,r)=>o.options.length>0?(d(),f("div",me,[(d(!0),f(R,null,H(l.value,a=>(d(),f("div",{key:a.id},[y("img",{src:h(a),class:"option-image"},null,8,pe),y("div",fe,_(v(a)),1)]))),128)),m.value?(d(),f("div",ye,_(n(c)("editor.more",{count:g.value})),1)):x("",!0)])):(d(),f("div",_e,_(o.emptyText),1))}},M=S(ge,[["__scopeId","data-v-f88d0ef4"]]),he={key:0,class:"cheapest-price"},ve={class:"from"},Ce={class:"price"},$e={__name:"CheapestPrice",props:{type:{type:String,required:!0,validator:o=>["clinic","hotel"].includes(o)}},setup(o){N();const s=o,c=new Map;function l(r,a,b){let $=0;const k=b[r];if(!k)return 0;for(const e of a)if(k[e])$+=k[e];else return 0;return $}function m(r,a,b){if(!r.length||!a.length)return 0;let $=1/0;for(const k of r){const e=`${k}#${JSON.stringify(a)}`;let t;c.has(e)?t=c.get(e):(t=l(k,a,b),c.set(e,t)),t>0&&t<$&&($=t)}return $===1/0?0:$}function g(r){if(!r.length)return 0;let a=1/0;for(const b of r)typeof b.displayPrice=="number"&&b.displayPrice<a&&(a=b.displayPrice);return a===1/0?0:a}const h=u(()=>{const r=[];for(const[a,b]of Object.entries(P.treatments))for(let $=0;$<b;$++)r.push(a);return r});z(h,()=>{c.clear()},{deep:!0});const v=u(()=>s.type==="clinic"?m(T.clinics,h.value,se):g(A.hotels)),C=u(()=>Math.round(v.value*j.rate));return(r,a)=>v.value>0?(d(),f("div",he,[y("p",ve,_(r.$t("message.from")),1),y("p",Ce,_(n(j).getSymbol())+_(C.value),1)])):x("",!0)}},V=S($e,[["__scopeId","data-v-eb15729d"]]);async function be(){try{const o=localStorage.getItem("userCountry");if(o){const{country:g,expiry:h}=JSON.parse(o);if(h>Date.now())return g;localStorage.removeItem("userCountry")}const l=(await(await fetch("https://ipapi.co/json/")).json()).country_name.toLowerCase(),m={country:l,expiry:Date.now()+24*60*60*1e3};return localStorage.setItem("userCountry",JSON.stringify(m)),l}catch{return null}}const ke={key:0,class:"local-price-calculator"},Ie={class:"local-price-amount"},Oe={__name:"LocalPriceCalculator",setup(o){const{t:s}=N(),c=J(null),l=u(()=>Object.keys(P.treatments).length>0);K(async()=>{c.value=await be()});const m=u(()=>c.value&&re[c.value]||null),g=u(()=>{if(!m.value||!l.value)return 0;let C=0;for(const[r,a]of Object.entries(P.treatments))m.value[r]&&(C+=m.value[r]*a);return C}),h=u(()=>Math.round(g.value*j.rate)),v=u(()=>m.value!==null&&l.value&&g.value>0);return(C,r)=>{var a;return v.value?(d(),f("div",ke,[E(_(n(s)("editor.typicalCostIn",{city:(a=m.value)==null?void 0:a.city}))+" ",1),y("span",Ie,_(n(j).getSymbol())+_(h.value),1)])):x("",!0)}}},Se=S(Oe,[["__scopeId","data-v-912b46ba"]]),xe={class:"filter-container"},Pe={class:"location-box"},we=["src","alt"],je={class:"location-name"},Ne={__name:"LocationFilter",emits:["selected"],setup(o,{emit:s}){const c=s,l=J([{id:1,name:"Global",image:"images/locations/global.jpg"},{id:3,name:"Turkey",image:"images/locations/turkey.jpg"},{id:5,name:"Albania",image:"images/locations/albania.jpg"},{id:6,name:"Montenegro",image:"images/locations/montenegro.jpg"},{id:4,name:"Croatia",image:"images/locations/croatia.jpg"},{id:11,name:"Serbia",image:"images/locations/serbia.jpg"},{id:7,name:"Slovakia",image:"images/locations/slovakia.jpg"},{id:8,name:"Bulgaria",image:"images/locations/bulgaria.jpg"},{id:2,name:"Mexico",image:"images/locations/mexico.jpg"},{id:9,name:"Indonesia",image:"images/locations/indonesia.jpg"},{id:10,name:"Vietnam",image:"images/locations/vietnam.jpg"}]),m=g=>{setTimeout(()=>{const h=l.value[g];L.setFilter(g,h.name),c("selected",h.name)},100)};return(g,h)=>(d(),f("div",xe,[p(n(ae),{"show-arrow":!0,"space-between":20,loop:!0,"slides-per-view":"1","centered-slides":"",draggable:"","on-update:current-index":m,"current-index":n(L).index},{default:I(()=>[(d(!0),f(R,null,H(l.value,v=>(d(),W(n(oe),{key:v.id},{default:I(()=>[y("div",Pe,[y("img",{class:"carousel-img",src:v.image,alt:v.name},null,8,we)]),y("div",je,_(v.name),1)]),_:2},1024))),128))]),_:1},8,["current-index"])]))}},Me=S(Ne,[["__scopeId","data-v-cebf3ffc"]]),G=o=>(Q("data-v-5b795ad4"),o=o(),Y(),o),Te={class:"package-editor"},Ae={class:"sections-wrapper"},Ee=G(()=>y("div",{class:"timeline-line"},null,-1)),Le={class:"location-filter-container"},De=G(()=>y("div",{class:"step-number"},"1",-1)),qe={key:0,class:"date-range"},Be={key:1,class:"placeholder"},Fe={__name:"PackageEditor",setup(o){const{t:s}=N(),c=X(),l=Array.isArray(q)?q:[],m=Array.isArray(B)?B:[];u(()=>{const e=new Set;D.forEach(i=>{i.country&&e.add(i.country)}),l.forEach(i=>{i.country&&e.add(i.country)}),ne.forEach(i=>{i.country&&e.add(i.country)}),m.forEach(i=>{i.country&&e.add(i.country)});const t=Array.from(e).sort();return[{label:s("editor.allCountries"),value:"All"},...t.map(i=>({label:i,value:i}))]});const g=u(()=>{const e=new Map;return D.forEach(t=>e.set(t.id,t)),l.forEach(t=>{e.has(t.id)||e.set(t.id,t)}),Array.from(e.values())}),h=u(()=>Object.entries(P.treatments).map(([e,t])=>({id:e,count:t}))),v=u(()=>T.clinics.map(e=>g.value.find(t=>t.id===e)).filter(Boolean)),C=u(()=>A.hotels.map(e=>({id:e.folder,...e})));function r(e){const t=te.find(i=>i.id===e.id);return{image:(t==null?void 0:t.image)||"",name:`${s(`treatments.${e.id}`)} (${e.count})`}}function a(e){var t;return{image:((t=e==null?void 0:e.images)==null?void 0:t[0])||"",name:(e==null?void 0:e.name)||""}}function b(e){var t;return{image:((t=e.thumbnails)==null?void 0:t[0])||"",name:e.name||""}}function $(e){ee.country=e==="Global"?"All":e}function k(){c.push("/request-offers")}return(e,t)=>(d(),f("div",Te,[p(n(Se)),y("div",Ae,[Ee,y("div",Le,[De,p(Me,{onSelected:$})]),p(n(w),{"step-number":2,title:n(s)("editor.treatments"),"is-completed":Object.keys(n(P).treatments).length>0,onClick:t[0]||(t[0]=i=>e.$router.push("/editor/treatments"))},{default:I(()=>[p(n(M),{options:h.value,"empty-text":n(s)("editor.selectTreatments"),"render-option":r},null,8,["options","empty-text"])]),_:1},8,["title","is-completed"]),p(n(w),{"step-number":3,title:n(s)("editor.clinics"),"is-completed":n(T).clinics.length>0,onClick:t[1]||(t[1]=i=>e.$router.push("/editor/clinics"))},{default:I(()=>[p(n(M),{options:v.value,"empty-text":n(s)("editor.selectClinics"),"render-option":a},null,8,["options","empty-text"]),p(V,{type:"clinic"})]),_:1},8,["title","is-completed"]),p(n(w),{"step-number":4,title:n(s)("editor.preferredDates"),"is-completed":n(O).length>0,onClick:t[2]||(t[2]=i=>e.$router.push("/editor/dates"))},{default:I(()=>[n(O).length===2&&n(O)[0]&&n(O)[1]?(d(),f("div",qe,[p(n(F),{time:n(O)[0],type:"date",format:"MMM d, yyyy"},null,8,["time"]),E(" - "),p(n(F),{time:n(O)[1],type:"date",format:"MMM d, yyyy"},null,8,["time"])])):(d(),f("div",Be,_(n(s)("editor.selectDates")),1))]),_:1},8,["title","is-completed"]),p(n(w),{"step-number":5,title:n(s)("editor.accommodation"),"is-completed":n(A).hotels.length>0,onClick:t[3]||(t[3]=i=>e.$router.push("/editor/accommodation"))},{default:I(()=>[p(n(M),{options:C.value,"empty-text":n(s)("editor.selectAccommodation"),"render-option":b},null,8,["options","empty-text"]),p(V,{type:"hotel"})]),_:1},8,["title","is-completed"]),p(n(Z),{type:"primary",size:"large",class:"request-button",onClick:k},{default:I(()=>[E(_(n(s)("editor.requestOffer")),1)]),_:1})])]))}},Ze=S(Fe,[["__scopeId","data-v-5b795ad4"]]);export{Ze as default};
