import{_ as F,j as M,U as O,x as L,c as V,a6 as N,X as j,o as c,k as d,F as I,$ as S,l as s,m as k,w as _,W as b,p as o,a2 as u,t as a,V as w,n as h,a3 as x,B as C,r as T,v as U}from"./index-BYKwQNmM.js";import{h as W}from"./hotels-CSV1N42v.js";import{N as A,a as D}from"./Carousel-D75ctts2.js";import{h as X}from"./fetched-hotels-CrR-RM6O.js";const q={class:"hotel-list"},z={class:"image-container"},G=["src"],J={key:0,class:"overlay"},K={class:"hotel-card-content"},Q={class:"hotel-card-header"},Y={class:"hotel-card-title"},Z={class:"hotel-card-rating"},ee={class:"hotel-card-location"},se={key:0,class:"hotel-rating"},te={class:"hotel-rating-count"},oe={key:0,class:"hotel-card-price"},ae={class:"per-night"},ne={class:"price"},le={class:"actions"},ce={__name:"HotelList",props:{hotels:Array},setup(g){const $=M(),{t:p}=O(),f=g,m=L({}),H=V(()=>{let e=f.hotels.filter(l=>!l.hidden);return N.country!=="All"&&(e=e.filter(l=>l.country===N.country)),e}),P=e=>{const l=m.value[e.folder];return typeof l=="number"&&isFinite(l)?Math.round(l*x.rate):null},B=e=>{$.push(`/hotel/${encodeURIComponent(e.folder)}`)},n=e=>{if(!u.hotels.some(l=>l.name===e.name)){const l=m.value[e.folder];u.hotels.push({...e,displayPrice:l})}},i=e=>{u.hotels=u.hotels.filter(l=>l.name!==e.name)},r=async e=>{try{const t=await(await fetch(`/hotels/${e.folder}/rooms.json`)).json();if(t.rooms&&t.rooms.length>0){const R=t.rooms.flatMap(y=>y.offers||[]).filter(y=>y.price&&typeof y.price.value=="number"&&isFinite(y.price.value)).map(y=>y.price.value);if(R.length>0){const y=Math.min(...R);m.value[e.folder]=y}else m.value[e.folder]=null}else m.value[e.folder]=null}catch(l){console.error(`Error loading room data for ${e.name}:`,l),m.value[e.folder]=null}};return j(async()=>{for(const e of H.value)await r(e)}),(e,l)=>(c(),d("div",q,[(c(!0),d(I,null,S(H.value,t=>(c(),d("div",{key:t.name,class:"hotel-card"},[s("div",z,[k(o(D),{draggable:""},{default:_(()=>[(c(!0),d(I,null,S(t.thumbnails,(v,R)=>(c(),b(o(A),{key:R},{default:_(()=>[s("img",{src:v,alt:"Hotel Image",class:"carousel-image"},null,8,G)]),_:2},1024))),128))]),_:2},1024),o(u).hotels.some(v=>v.name===t.name)?(c(),d("div",J,[s("p",null,a(o(p)("message.selected")),1)])):w("",!0)]),s("div",K,[s("div",Q,[s("div",null,[s("h3",Y,[h(a(t.name)+" ",1),s("span",null,a("✩".repeat(t.starRating||0)),1)]),s("div",Z,[s("p",ee,a(t.city)+", "+a(t.country),1),t.rating?(c(),d("div",se,[h(a(e.$t("message.userRating"))+" ",1),s("span",te,a(Number(t.rating).toFixed(1)),1)])):w("",!0)])]),P(t)!==null?(c(),d("div",oe,[s("p",ae,a(e.$t("message.from")),1),s("p",ne,a(o(x).getSymbol())+a(P(t)),1)])):w("",!0)]),s("div",le,[k(o(C),{style:{margin:"0"},class:"action-button",onClick:v=>B(t)},{default:_(()=>[h(a(e.$t("message.details")),1)]),_:2},1032,["onClick"]),o(u).hotels.some(v=>v.name===t.name)?(c(),b(o(C),{key:1,class:"book-now-button",type:"primary",onClick:v=>i(t)},{default:_(()=>[h(a(o(p)("message.deselect")),1)]),_:2},1032,["onClick"])):(c(),b(o(C),{key:0,class:"book-now-button",type:"primary",onClick:v=>n(t)},{default:_(()=>[h(a(o(p)("message.select")),1)]),_:2},1032,["onClick"]))])])]))),128))]))}},re=F(ce,[["__scopeId","data-v-d21d9afd"]]),ie={class:"hotel-list"},de={class:"image-container"},ue=["src"],me={key:0,class:"overlay"},_e={class:"hotel-card-content"},he={class:"hotel-card-header"},pe={class:"hotel-card-title"},fe={class:"hotel-card-rating"},ve={class:"hotel-card-location"},ye={key:0,class:"hotel-rating"},ge={class:"hotel-rating-count"},$e={class:"actions"},ke={__name:"OnlineHotelList",props:{hotels:Array},setup(g){M();const{t:$}=O(),p=g,f=L({}),m=V(()=>{let n=p.hotels.filter(i=>!i.hidden);return N.country!=="All"&&(n=n.filter(i=>i.country===N.country)),n}),H=n=>{if(!u.hotels.some(i=>i.name===n.name)){const i=f.value[n.folder];u.hotels.push({...n,displayPrice:i})}},P=n=>{u.hotels=u.hotels.filter(i=>i.name!==n.name)},B=async n=>{try{const r=await await fetch(`/fetched-hotels/${n.folder}/rooms.json`);if(r.rooms&&r.rooms.length>0){const l=r.rooms.flatMap(t=>t.offers||[]).filter(t=>t.price&&typeof t.price.value=="number"&&isFinite(t.price.value)).map(t=>t.price.value);if(l.length>0){const t=Math.min(...l);f.value[n.folder]=t}else f.value[n.folder]=null}else f.value[n.folder]=null}catch(i){console.error(`Error loading room data for ${n.name}:`,i),f.value[n.folder]=null}};return j(async()=>{for(const n of m.value)await B(n)}),(n,i)=>(c(),d("div",ie,[(c(!0),d(I,null,S(m.value,r=>(c(),d("div",{key:r.name,class:"hotel-card"},[s("div",de,[k(o(D),{draggable:""},{default:_(()=>[(c(!0),d(I,null,S(r.thumbnails,(e,l)=>(c(),b(o(A),{key:l},{default:_(()=>[s("img",{src:e,alt:"Hotel Image",class:"carousel-image"},null,8,ue)]),_:2},1024))),128))]),_:2},1024),o(u).hotels.some(e=>e.name===r.name)?(c(),d("div",me,[s("p",null,a(o($)("message.selected")),1)])):w("",!0)]),s("div",_e,[s("div",he,[s("div",null,[s("h3",pe,[h(a(r.name)+" ",1),s("span",null,a("✩".repeat(r.starRating||0)),1)]),s("div",fe,[s("p",ve,a(r.city)+", "+a(r.country),1),r.rating?(c(),d("div",ye,[h(a(n.$t("message.userRating"))+" ",1),s("span",ge,a(Number(r.rating).toFixed(1)),1)])):w("",!0)])])]),s("div",$e,[o(u).hotels.some(e=>e.name===r.name)?(c(),b(o(C),{key:1,class:"book-now-button",type:"primary",onClick:e=>P(r)},{default:_(()=>[h(a(o($)("message.deselect")),1)]),_:2},1032,["onClick"])):(c(),b(o(C),{key:0,class:"book-now-button",type:"primary",onClick:e=>H(r)},{default:_(()=>[h(a(o($)("message.select")),1)]),_:2},1032,["onClick"]))])])]))),128))]))}},be=F(ke,[["__scopeId","data-v-adbe466a"]]),E=g=>(T("data-v-159a6a3c"),g=g(),U(),g),Ce={class:"container"},He={class:"hotel-list"},we={class:"title-line"},Ie={class:"online-hotels-title"},Pe=E(()=>s("hr",{class:"online-hotels-divider"},null,-1)),Re={class:"title-line"},Ne={class:"online-hotels-title"},Se=E(()=>s("hr",{class:"online-hotels-divider"},null,-1)),Be={class:"bottom-actions"},Fe={__name:"HotelSelectionPage",setup(g){const $=M(),{t:p}=O();return(f,m)=>(c(),d(I,null,[s("div",Ce,[s("div",He,[s("div",we,[s("h2",Ie,a(o(p)("message.partnerHotels")),1),Pe]),k(o(re),{initiallySelected:o(u).hotels,hotels:o(W),onBook:f.bookHotel},null,8,["initiallySelected","hotels","onBook"]),s("div",Re,[s("h2",Ne,a(o(p)("message.onlineHotels")),1),Se]),k(be,{hotels:o(X)},null,8,["hotels"])])]),s("div",Be,[k(o(C),{type:"primary",strong:"",onClick:m[0]||(m[0]=H=>o($).push("/editor"))},{default:_(()=>[h(a(o(p)("message.continue")),1)]),_:1})])],64))}},Ve=F(Fe,[["__scopeId","data-v-159a6a3c"]]);export{Ve as default};
