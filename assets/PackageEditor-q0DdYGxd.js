import{_ as C,o as a,k as c,l as y,t as p,S as b,V as M,R as T,c as h,F as E,W as B,p as t,j as V,m as d,w as k,n as S,B as A,r as j,s as R}from"./index-Bo6RbyAZ.js";import{a as I,s as N,b as P,c as $}from"./state-DfIyutr0.js";import{T as w}from"./treatments-FRMeeQws.js";import{c as F}from"./clinics-DxuE_lTw.js";import{p as H}from"./prices-Sgi2l8nr.js";import{N as q}from"./Time-Vf32zPJ6.js";import"./index-DvqMQJ4z.js";const L={class:"step-number"},z={key:0},W={class:"content"},G={key:1,class:"title-overlay"},J={__name:"EditorSection",props:{stepNumber:{type:Number,required:!0},title:{type:String,required:!0},isCompleted:{type:Boolean,default:!1}},emits:["click"],setup(o){return(s,f)=>(a(),c("div",{class:"editor-section",onClick:f[0]||(f[0]=v=>s.$emit("click"))},[y("div",L,p(o.stepNumber),1),o.isCompleted?b("",!0):(a(),c("h3",z,p(o.title),1)),y("div",W,[M(s.$slots,"default",{},void 0,!0)]),o.isCompleted?(a(),c("div",G,[y("h3",null,p(o.title),1)])):b("",!0)]))}},O=C(J,[["__scopeId","data-v-ef20bb7e"]]),K={key:0,class:"option-container"},Q=["src"],U={class:"option-name"},X={key:0,class:"more-option-selected"},Y={key:1,class:"placeholder"},Z={__name:"OptionContainer",props:{options:{type:Array,required:!0},maxDisplay:{type:Number,default:4},emptyText:{type:String,required:!0},renderOption:{type:Function,default:o=>o}},setup(o){const s=o,{t:f}=T(),v=h(()=>s.options.slice(0,s.maxDisplay)),g=h(()=>s.options.length>s.maxDisplay),i=h(()=>s.options.length-s.maxDisplay);function l(r){return s.renderOption(r).image||""}function m(r){return s.renderOption(r).name||""}return(r,u)=>o.options.length>0?(a(),c("div",K,[(a(!0),c(E,null,B(v.value,e=>(a(),c("div",{key:e.id},[y("img",{src:l(e),class:"option-image"},null,8,Q),y("div",U,p(m(e)),1)]))),128)),g.value?(a(),c("div",X,p(t(f)("editor.more",{count:i.value})),1)):b("",!0)])):(a(),c("div",Y,p(o.emptyText),1))}},x=C(Z,[["__scopeId","data-v-cb6ecf4e"]]),ee={key:0,class:"cheapest-price"},te={class:"from"},se={class:"price"},ne={__name:"CheapestPrice",setup(o){T();const s=h(()=>{const i=[];for(const[l,m]of Object.entries(I.treatments))for(let r=0;r<m;r++)i.push(l);return i});function f(i,l,m){let r=0;const u=m[i];if(!u)return 0;for(const e of l)if(u[e])r+=u[e];else return 0;return r}function v(i,l,m){if(!i.length||!l.length)return 0;let r=1/0;for(const u of i){const e=f(u,l,m);e>0&&e<r&&(r=e)}return r===1/0?0:r}const g=h(()=>v(N.clinics,s.value,H));return(i,l)=>g.value>0?(a(),c("div",ee,[y("p",te,p(i.$t("message.from")),1),y("p",se,"â‚¬"+p(g.value),1)])):b("",!0)}},oe=C(ne,[["__scopeId","data-v-1b79694f"]]),re=o=>(j("data-v-dfac1792"),o=o(),R(),o),ie={class:"package-editor"},ae=re(()=>y("div",{class:"timeline-line"},null,-1)),ce={key:0,class:"date-range"},le={key:1,class:"placeholder"},de={__name:"PackageEditor",setup(o){const{t:s}=T(),f=V(),v=h(()=>Object.entries(I.treatments).map(([e,n])=>({id:e,count:n}))),g=h(()=>N.clinics.map(e=>({id:e}))),i=h(()=>P.hotels.map(e=>({id:e.folder,...e})));function l(e){const n=w.find(_=>_.id===e.id);return{image:(n==null?void 0:n.image)||"",name:`${s(`treatments.${e.id}`)} (${e.count})`}}function m(e){var _;const n=F.find(D=>D.id===e.id);return{image:((_=n==null?void 0:n.images)==null?void 0:_[0])||"",name:(n==null?void 0:n.name)||""}}function r(e){var n;return{image:((n=e.thumbnails)==null?void 0:n[0])||"",name:e.name||""}}function u(){f.push("/request-offers")}return(e,n)=>(a(),c("div",ie,[ae,d(t(O),{"step-number":1,title:t(s)("editor.treatments"),"is-completed":Object.keys(t(I).treatments).length>0,onClick:n[0]||(n[0]=_=>e.$router.push("/editor/treatments"))},{default:k(()=>[d(t(x),{options:v.value,"empty-text":t(s)("editor.selectTreatments"),"render-option":l},null,8,["options","empty-text"])]),_:1},8,["title","is-completed"]),d(t(O),{"step-number":2,title:t(s)("editor.clinics"),"is-completed":t(N).clinics.length>0,onClick:n[1]||(n[1]=_=>e.$router.push("/editor/clinics"))},{default:k(()=>[d(t(x),{options:g.value,"empty-text":t(s)("editor.selectClinics"),"render-option":m},null,8,["options","empty-text"]),d(t(oe))]),_:1},8,["title","is-completed"]),d(t(O),{"step-number":3,title:t(s)("editor.preferredDates"),"is-completed":t($).length>0,onClick:n[2]||(n[2]=_=>e.$router.push("/editor/dates"))},{default:k(()=>[t($).length===2&&t($)[0]&&t($)[1]?(a(),c("div",ce,[d(t(q),{time:t($)[0],type:"date",format:"MMM d, yyyy"},null,8,["time"]),S(" - "),d(t(q),{time:t($)[1],type:"date",format:"MMM d, yyyy"},null,8,["time"])])):(a(),c("div",le,p(t(s)("editor.selectDates")),1))]),_:1},8,["title","is-completed"]),d(t(O),{"step-number":4,title:t(s)("editor.accommodation"),"is-completed":t(P).hotels.length>0,onClick:n[3]||(n[3]=_=>e.$router.push("/editor/accommodation"))},{default:k(()=>[d(t(x),{options:i.value,"empty-text":t(s)("editor.selectAccommodation"),"render-option":r},null,8,["options","empty-text"])]),_:1},8,["title","is-completed"]),d(t(A),{type:"primary",size:"large",class:"request-button",onClick:u},{default:k(()=>[S(p(t(s)("editor.requestOffer")),1)]),_:1})]))}},ve=C(de,[["__scopeId","data-v-dfac1792"]]);export{ve as default};
