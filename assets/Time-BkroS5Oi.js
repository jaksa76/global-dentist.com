import{r as S,t as d,m as E,k as I,g as Y,a as Z,p as $,o as C}from"./index-I_Y6sOp1.js";import{am as H,d as j,az as k,c as T,n as p,i as q}from"./index-DX5Vr3KF.js";function B(r,n){S(2,arguments);var t=d(r),l=d(n),i=t.getTime()-l.getTime();return i<0?-1:i>0?1:i}function P(r){return E({},r)}var y=1e3*60,M=60*24,O=M*30,_=M*365;function V(r,n,t){var l,i,f;S(2,arguments);var m=Y(),o=(l=(i=t==null?void 0:t.locale)!==null&&i!==void 0?i:m.locale)!==null&&l!==void 0?l:H;if(!o.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var x=B(r,n);if(isNaN(x))throw new RangeError("Invalid time value");var e=E(P(t),{addSuffix:!!(t!=null&&t.addSuffix),comparison:x}),s,c;x>0?(s=d(n),c=d(r)):(s=d(r),c=d(n));var v=String((f=t==null?void 0:t.roundingMethod)!==null&&f!==void 0?f:"round"),u;if(v==="floor")u=Math.floor;else if(v==="ceil")u=Math.ceil;else if(v==="round")u=Math.round;else throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");var N=c.getTime()-s.getTime(),g=N/y,b=I(c)-I(s),h=(N-b)/y,R=t==null?void 0:t.unit,a;if(R?a=String(R):g<1?a="second":g<60?a="minute":g<M?a="hour":h<O?a="day":h<_?a="month":a="year",a==="second"){var z=u(N/1e3);return o.formatDistance("xSeconds",z,e)}else if(a==="minute"){var L=u(g);return o.formatDistance("xMinutes",L,e)}else if(a==="hour"){var U=u(g/60);return o.formatDistance("xHours",U,e)}else if(a==="day"){var F=u(h/M);return o.formatDistance("xDays",F,e)}else if(a==="month"){var D=u(h/O);return D===12&&R!=="month"?o.formatDistance("xYears",1,e):o.formatDistance("xMonths",D,e)}else if(a==="year"){var A=u(h/_);return o.formatDistance("xYears",A,e)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function w(r){S(1,arguments);var n=Z(r);return d(n*1e3)}const G={time:{type:[Number,Date],default:void 0},type:{type:String,default:"datetime"},to:{type:[Number,Date],default:void 0},unix:Boolean,format:String,text:Boolean,timeZone:String},Q=j({name:"Time",props:G,setup(r){const n=Date.now(),{localeRef:t,dateLocaleRef:l}=k("Time"),i=T(()=>{const{timeZone:e}=r;return e?(s,c,v)=>$(s,e,c,v):C}),f=T(()=>({locale:l.value.locale})),m=T(()=>{const{time:e}=r;return r.unix?e===void 0?n:w(typeof e=="number"?e:e.valueOf()):e??n}),o=T(()=>{const{to:e}=r;return r.unix?e===void 0?n:w(typeof e=="number"?e:e.valueOf()):e??n});return{renderedTime:T(()=>r.format?i.value(m.value,r.format,f.value):r.type==="date"?i.value(m.value,t.value.dateFormat,f.value):r.type==="datetime"?i.value(m.value,t.value.dateTimeFormat,f.value):V(m.value,o.value,{addSuffix:!0,locale:l.value.locale}))}},render(){return this.text?p(this.renderedTime):q("time",[this.renderedTime])}});export{Q as N};
